<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>4 Lab</title>
</head>
<body>
    <section id="insert-names">
        <div>
            <label>
                <input type="email" placeholder="From e-mail" name="newnamesData" id="mailfrom" type="text">
                <input type="password" placeholder="Password" name="newnamesData" id="Passmail" type="text"><br>
                <input type="email" placeholder="To e-mail" name="newnamesData" id="mailfor" type="text"><br>
                <input placeholder="Message" name="newnamesData" id="MS" type="MS" size="60">
            </label>
        </div>
        <button onclick="Send()">Send</button>
        <section id="select-names"></section>
    </section>

    <script>
        const ENDPOINT = 'http://localhost:5000/sendMS';

        function Send() {
          let namesData = Array.from(document.getElementsByName('newnamesData')).map(a => {
              return {field: a.getAttribute('id'), value: a.value};});
            fetch(ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json'},
                body: JSON.stringify({
                    mfrom: namesData.find(a => a.field === 'mailfrom').value,
                    fromps: namesData.find(a => a.field === 'Passmail').value,
                    mfor: namesData.find(a => a.field === 'mailfor').value,
                    MS: namesData.find(a => a.field === 'MS').value,
                })
            });

            alert('sent');

        }
    </script>
</body>
</html>
